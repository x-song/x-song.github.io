webpackJsonp([1,0],[function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var i=s(4),c=o(i),a=s(44),n=o(a),r=s(43),l=o(r),d=s(35),v=o(d),p=s(37),u=o(p),f=s(39),h=o(f),_=s(40),m=o(_);c.default.use(n.default),c.default.use(l.default);var x=c.default.extend(v.default),b=new n.default({linkActiveClass:"active"});b.map({"/":{component:u.default},"/goods":{component:u.default},"/ratings":{component:h.default},"/seller":{component:m.default}}),b.start(x,"#app")},,function(t,e,s){var o,i,c={};s(21),o=s(6),i=s(31),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(c).forEach(function(t){var e=c[t];a.computed[t]=function(){return e}})},function(t,e,s){var o,i,c={};s(24),o=s(13),i=s(34),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(c).forEach(function(t){var e=c[t];a.computed[t]=function(){return e}})},,function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(38),c=o(i),a=0;e.default={data:function(){return{seller:{}}},created:function(){var t=this;this.$http.get("./api/seller").then(function(e){e=e.body,e.errno==a&&(t.seller=e.data)})},components:{"v-header":c.default}}},function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(4),c=o(i);e.default={props:{food:{type:Object}},methods:{addCart:function(t){t._constructed&&(this.food.count?this.food.count++:c.default.set(this.food,"count",1),this.$dispatch("cart.add",t.target))},desreaseCart:function(){event._constructed&&this.food.count&&this.food.count--}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{food:{type:Object}},data:function(){return{showFlag:!1}},methods:{show:function(){this.showFlag=!0},hide:function(){this.showFlag=!1}}}},function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(1),c=o(i),a=s(41),n=o(a),r=s(36),l=o(r),d=s(2),v=o(d),p=0;e.default={props:{seller:{type:Object}},data:function(){return{goods:[],listHeight:[],scrollY:0,selectedFood:{}}},computed:{currentIndex:function(){for(var t=0;t<this.listHeight.length;t++){var e=this.listHeight[t],s=this.listHeight[t+1];if(!s||this.scrollY>=e&&this.height1<s)return t}return 0},selectFoods:function(){var t=[];return this.goods.forEach(function(e){e.foods.forEach(function(e){e.count&&t.push(e)})}),t}},created:function(){var t=this;this.classMap=["decrease","discount","guarantee","invoice","special"],this.$http.get("./api/goods").then(function(e){e=e.body,e.errno==p&&(t.goods=e.data,t.$nextTick(function(){t._initScroll(),t._calculateHeight()}))})},methods:{selectMenu:function(t,e){if(e._constructed){var s=this.$els.foodsWrapper.getElementsByClassName("food-list-hook"),o=s[t];this.foodsScroll.scrollToElement(o,300)}},_drop:function(t){var e=this;this.$nextTick(function(){e.$refs.shopcart.drop(t)})},selectFood:function(t,e){e._constructed&&(this.selectedFood=t,this.$refs.food.show())},_initScroll:function(){var t=this;this.menuScroll=new c.default(this.$els.menuWrapper,{click:!0}),this.foodsScroll=new c.default(this.$els.foodsWrapper,{click:!0,probeType:3}),this.foodsScroll.on("scroll",function(e){t.scrollY=Math.abs(Math.round(e.y))})},_calculateHeight:function(){var t=this.$els.foodsWrapper.getElementsByClassName("food-list-hook"),e=0;this.listHeight.push(e);for(var s=0;s<t.length;s++){var o=t[s];e+=o.clientHeight,this.listHeight.push(e)}}},components:{shopcart:n.default,cartcontrol:v.default,food:l.default},events:{"cart.add":function(t){this._drop(t)}}}},function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(3),c=o(i),a=s(42),n=o(a);e.default={props:{seller:{type:Object}},data:function(){return{detailShow:!1}},methods:{showDetail:function(){this.detailShow=!0},showClose:function(){this.detailShow=!1}},created:function(){this.classMap=["decrease","discount","guarantee","invoice","special"]},components:{star:c.default,title:n.default}}},function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(3),c=o(i);e.default={props:{seller:{type:Object}},components:{star:c.default}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(1),c=o(i),a=s(2),n=o(a);e.default={props:{selectFoods:{type:Array,default:function(){return[]}},deliveryPrice:{type:Number,default:0},minPrice:{type:Number,default:0}},data:function(){return{balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[],fold:!0}},computed:{totalPrice:function(){var t=0;return this.selectFoods.forEach(function(e){t+=e.price*e.count}),t},totalCount:function(){var t=0;return this.selectFoods.forEach(function(e){t+=e.count}),t},payDesc:function(){if(0===this.totalPrice)return"￥"+this.minPrice+"元起送";if(this.totalPrice<this.minPrice){var t=this.minPrice-this.totalPrice;return"还差￥"+t+"元起送"}return"去结算"},payClass:function(){return this.totalPrice<this.minPrice?"not-enough":"enough"},listShow:function(){var t=this;if(!this.totalCount)return this.fold=!0,!1;var e=!this.fold;return e&&this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new c.default(t.$els.listContent,{click:!0})}),e}},methods:{drop:function(t){for(var e=0;e<this.balls.length;e++){var s=this.balls[e];if(!s.show)return s.show=!0,s.el=t,void this.dropBalls.push(s)}},toggleList:function(){this.totalCount&&(this.fold=!this.fold)},empty:function(){this.selectFoods.forEach(function(t){t.count=0})},hidelist:function(){this.fold=!0},pay:function(){this.totalPrice<this.minPrice||window.alert("你需要支付"+this.totalPrice)}},transitions:{drop:{beforeEnter:function(t){for(var e=this.balls.length;e--;){var s=this.balls[e];s.show}},enter:function(t){t.offsetHeight;this.$nextTick(function(){})},afterEnter:function(t){var e=this.dropBalls.shift();e&&(e.show=!1,t.style.display="none")}}},components:{cartcontrol:n.default}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=5,o="on",i="half",c="off";e.default={props:{size:{type:Number},score:{type:Number}},computed:{starType:function(){return"star-"+this.size},itemClasses:function(){for(var t=[],e=Math.floor(2*this.score)/2,a=e%1!==0,n=Math.floor(e),r=0;r<n;r++)t.push(o);for(a&&t.push(i);t.length<s;)t.push(c);return t}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{name:{type:String}}}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){t.exports=" <div class=seller> seller </div> "},function(t,e){t.exports=' <div class=ratings _v-0267464e=""> <div class=ratings-content _v-0267464e=""> <div class=overview _v-0267464e=""> <div class=overview-left _v-0267464e=""> <h1 class=score _v-0267464e="">{{seller.score}}</h1> <div class=title _v-0267464e="">综合评分</div> <div class=rank _v-0267464e="">高于周边商家{{seller.rankRate}}%</div> </div> <div class=overview-right _v-0267464e=""> <div class=score-wrapper _v-0267464e=""> <span class=title _v-0267464e="">服务态度</span> <star :size=36 :score=seller.serviceScore _v-0267464e=""></star> <span class=score _v-0267464e="">{{seller.serviceScore}}</span> </div> <div class=score-wrapper _v-0267464e=""> <span class=title _v-0267464e="">商品评分</span> <star :size=36 :score=seller.foodScore _v-0267464e=""></star> <span class=score _v-0267464e="">{{seller.foodScore}}</span> </div> <div class=delivery-wrapper _v-0267464e=""> <span class=title _v-0267464e="">送达时间</span> <span class=delivery _v-0267464e="">{{seller.deliveryTime}}分钟</span> </div> </div> </div> </div> </div> '},function(t,e){t.exports=' <div class=title _v-0b7634d2=""> <div class=line _v-0b7634d2=""></div> <div class=text _v-0b7634d2="">{{name}}</div> <div class=line _v-0b7634d2=""></div> </div> '},function(t,e){t.exports=' <div _v-1e55a987=""> <v-header :seller=seller _v-1e55a987=""></v-header> <div class=tab _v-1e55a987=""> <div class=tab-item _v-1e55a987=""> <a v-link="{path:\'/goods\'}" _v-1e55a987="">商品</a> </div> <div class=tab-item _v-1e55a987=""> <a v-link="{path:\'/ratings\'}" _v-1e55a987="">评论</a> </div> <div class=tab-item _v-1e55a987=""> <a v-link="{path:\'/seller\'}" _v-1e55a987="">商家</a> </div> </div> <router-view :seller=seller _v-1e55a987=""></router-view> </div> '},function(t,e){t.exports=' <div class=food v-show=showFlag transition=move _v-2045d8c0=""> <div class=food-content _v-2045d8c0=""> <div class=image-header _v-2045d8c0=""> <img :src=food.image _v-2045d8c0=""> <div class=back @click=hide() _v-2045d8c0=""> <i class=icon-arrow_lift _v-2045d8c0=""></i> </div> <div class=content _v-2045d8c0=""> <h1 class=title _v-2045d8c0="">{{food.name}}</h1> <div class=detail _v-2045d8c0=""> <span class=select-count _v-2045d8c0="">月售{{food.sellCount}}</span> <span class=rating _v-2045d8c0="">{{food.rating}}</span> </div> <div class=price _v-2045d8c0=""> <span class=now _v-2045d8c0="">￥{{food.price}}</span> <span class=old v-show=food.oldPrice _v-2045d8c0="">￥{{food.oldPrice}}</span> </div> </div> </div> </div> </div> '},function(t,e){t.exports=' <div class=header _v-24772800=""> <div class=content-wraper _v-24772800=""> <div class=avatar _v-24772800=""> <img :src=seller.avatar width=64 height=64 _v-24772800=""> </div> <div class=content _v-24772800=""> <div class=title _v-24772800=""> <span class=brand _v-24772800=""></span> <span class=name _v-24772800="">{{seller.name}}</span> </div> <div class=description _v-24772800=""> {{seller.description}}/{{seller.deliveryTime}}分钟送达 </div> <div class=support v-if=seller.supports _v-24772800=""> <span class=icon :class=classMap[seller.supports[0].type] _v-24772800=""></span> <span class=text _v-24772800="">{{seller.supports[0].description}}</span> </div> </div> <div v-if=seller.supports @click=showDetail class=support-count _v-24772800=""> <span class=count _v-24772800="">{{seller.supports.length}}个</span> <i class=icon-keyboard_arrow_right _v-24772800=""></i> </div> </div> <div class=bulletin-wraper _v-24772800=""> <span class=bulletin-title _v-24772800=""></span><span class=bulletin-text _v-24772800="">{{seller.bulletin}}</span> <i class=icon-keyboard_arrow_right _v-24772800=""></i> </div> <div class=background _v-24772800=""> <img :src=seller.avatar width=100% height=100% alt="" _v-24772800=""> </div> <div class=detail v-show=detailShow transition=fade _v-24772800=""> <div class="detail-wrapper clearfix" _v-24772800=""> <div class=detail-main _v-24772800=""> <h1 class=name _v-24772800="">{{seller.name}}</h1> <div class=star-wrapper _v-24772800=""> <star :size=48 :score=seller.score _v-24772800=""></star> <title name=优惠信息 _v-24772800=""></title> <ul v-if=seller.supports class=supports _v-24772800=""> <li class=support-item v-for="item in seller.supports" _v-24772800=""> <span class=icon :class=classMap[seller.supports[$index].type] _v-24772800=""></span> <span class=text _v-24772800="">{{seller.supports[$index].description}}</span> </li> </ul> <title name=商家公告 _v-24772800=""></title> <div class=bulletin _v-24772800=""> <p class=content _v-24772800="">{{seller.bulletin}}</p> </div> </div> </div> </div> <div class=detail-close _v-24772800=""> <i class=icon-close @click=showClose _v-24772800=""></i> </div> </div> </div> '},function(t,e){t.exports=' <div class=cartcontrol _v-2a002fdc=""> <div class=cart-desrease v-show="food.count>0" @click=desreaseCart transition=move _v-2a002fdc=""> <span class="inner icon-remove_circle_outline" _v-2a002fdc=""></span> </div> <div class=cart-count v-show="food.count>0" _v-2a002fdc="">{{food.count}}</div> <div class="cart-add icon-add_circle" @click=addCart _v-2a002fdc=""></div> </div> '},function(t,e){t.exports=' <div class=goods _v-51526b64=""> <div class=menu-wrapper v-el:menu-wrapper="" _v-51526b64=""> <ul _v-51526b64=""> <li v-for="item in goods" class=menu-item :class="{\'current\':currentIndex === $index}" @click=selectMenu($index,$event) _v-51526b64=""> <span class=text _v-51526b64=""> <span v-show="item.type>0" class=icon :class=classMap[item.type] _v-51526b64=""></span> {{item.name}} </span> </li> </ul> </div> <div class=foods-wrapper v-el:foods-wrapper="" _v-51526b64=""> <ul _v-51526b64=""> <li v-for="item in goods" class="food-list food-list-hook" _v-51526b64=""> <h1 class=title _v-51526b64="">{{item.name}}</h1> <ul _v-51526b64=""> <li @click=selectFood(food,$event) v-for="food in item.foods" class=food-item _v-51526b64=""> <div class=icon _v-51526b64=""> <img :src=food.icon width=57 height=57 alt="" _v-51526b64=""> </div> <div class=content _v-51526b64=""> <h2 class=name _v-51526b64="">{{food.name}}</h2> <p class=desc _v-51526b64="">{{food.description}}</p> <div class=extra _v-51526b64=""> <span class=count _v-51526b64="">月售{{food.sellCount}}份</span> <span _v-51526b64="">好评率{{food.rating}}%</span> </div> <div class=price _v-51526b64=""> <span class=now _v-51526b64="">￥{{food.price}}</span><span class=old v-show=food.oldPrice _v-51526b64="">￥{{food.oldPrice}}</span> </div> <div class=cartcontrol-wrapper _v-51526b64=""> <cartcontrol :food=food _v-51526b64=""></cartcontrol> </div> </div> </li> </ul> </li> </ul> </div> <shopcart v-ref:shopcart="" :select-foods=selectFoods :delivery-price=seller.deliveryPrice :min-price=seller.minPrice _v-51526b64=""></shopcart> </div> <food :food=selectedFood v-ref:food="" _v-51526b64=""></food> '},function(t,e){t.exports=' <div class=shopcart _v-a9326dc0=""> <div class=content @click=toggleList _v-a9326dc0=""> <div class=content-left _v-a9326dc0=""> <div class=logo-wrapper _v-a9326dc0=""> <div class=logo :class="{\'highlight\':totalPrice>0}" _v-a9326dc0=""> <i class=icon-shopping_cart :class="{\'highlight\':totalPrice>0}" _v-a9326dc0=""></i> </div> <div class=num _v-a9326dc0="">{{totalCount}}</div> </div> <div class=price :class="{\'highlight\':totalPrice>0}" _v-a9326dc0="">￥{{totalPrice}}</div> <div class=desc _v-a9326dc0="">另需配送费￥{{deliveryPrice}}元</div> </div> <div class=content-right _v-a9326dc0=""> <div class=pay :class=payClass @click.stop.prevent=pay _v-a9326dc0=""> {{payDesc}} </div> </div> </div> <div class=ball-container _v-a9326dc0=""> <div transition=drop class=ball v-for="ball in balls" v-show=ball.show _v-a9326dc0=""></div> <div class="inner inner-hook" _v-a9326dc0=""></div> </div> <div class=shopcart-list v-show=listShow transition=fold _v-a9326dc0=""> <div class=list-header _v-a9326dc0=""> <h1 class=titles _v-a9326dc0="">购物车</h1> <span class=empty @click=empty _v-a9326dc0="">清空</span> </div> <div class=list-content v-el:list-content="" _v-a9326dc0=""> <ul _v-a9326dc0=""> <li class=food v-for="food in selectFoods" _v-a9326dc0=""> <span class=name _v-a9326dc0="">{{food.name}}</span> <div class=price _v-a9326dc0=""> <span _v-a9326dc0="">￥{{food.price*food.count}}</span> </div> <div class=cartcontrol-wrapper _v-a9326dc0=""> <cartcontrol :food=food _v-a9326dc0=""></cartcontrol> </div> </li> </ul> </div> </div> </div> <div class=list-mask v-show=listShow @click=hidelist transition=fade _v-a9326dc0=""></div> '},function(t,e){t.exports=' <div class=star :class=starType _v-bb6227c0=""> <span v-for="itemClass in itemClasses" :class=itemClass track-by=$index class=star-item _v-bb6227c0=""></span> </div> '},function(t,e,s){var o,i,c={};s(18),o=s(5),i=s(28),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(c).forEach(function(t){var e=c[t];a.computed[t]=function(){return e}})},function(t,e,s){var o,i,c={};s(19),o=s(7),i=s(29),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(c).forEach(function(t){var e=c[t];a.computed[t]=function(){return e}})},function(t,e,s){var o,i,c={};s(22),o=s(8),i=s(32),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(c).forEach(function(t){var e=c[t];a.computed[t]=function(){return e}})},function(t,e,s){var o,i,c={};s(20),o=s(9),i=s(30),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(c).forEach(function(t){var e=c[t];a.computed[t]=function(){return e}})},function(t,e,s){var o,i,c={};s(16),o=s(10),i=s(26),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(c).forEach(function(t){var e=c[t];a.computed[t]=function(){return e}})},function(t,e,s){var o,i,c={};s(15),o=s(11),i=s(25),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(c).forEach(function(t){var e=c[t];a.computed[t]=function(){return e}})},function(t,e,s){var o,i,c={};s(23),o=s(12),i=s(33),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(c).forEach(function(t){var e=c[t];a.computed[t]=function(){return e}})},function(t,e,s){var o,i,c={};s(17),o=s(14),i=s(27),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports.default);var a="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(a.template=i),a.computed||(a.computed={}),Object.keys(c).forEach(function(t){var e=c[t];a.computed[t]=function(){return e}})},,,function(t,e){}]);
//# sourceMappingURL=app.88cb6143596337040d59.js.map